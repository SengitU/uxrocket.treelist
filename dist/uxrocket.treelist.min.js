/*! UX Rocket Treelist 
 *  Tree view in tables 
 *  @author Bilal Cinarli <bcinarli@gmail.com> (https://github.com/bcinarli) 
 *  @version 0.1.0 
 *  @build Thu Sep 17 2015 21:44:59 GMT+0300 (EEST) 
 */
!function(t){"use strict";"function"==typeof define&&define.amd?define(["jquery"],t):t("object"==typeof exports&&"function"==typeof require?jQuery:jQuery)}(function(t){"use strict";var e,s="uxrTreelist",r={},i={click:"click.uxrTreelist",collapsed:"collapsed.uxTreelist",expanded:"expanded.uxTreelist"},a={prefix:"uxr-",rocket:"uxRocket",data:s,name:"treelist"},n=function(e,i,a){this._name=s,this._defaults=r,this.el=e,this.$el=t(e),this.options=t.extend(!0,{},r,i,this.$el.data()),this.selector=a,this.headers=[],this.contents=[],this.init()};t.extend(n.prototype,{init:function(){this.$el.addClass("uxr-treelist-ready"),this.$rows=this.$el.find("> thead > tr, > tbody > tr, > tr"),this.prepare(),this.bindUIActions()},prepare:function(){this.getRows(),this.setHeaders(),this.setContents()},getRows:function(){var e=this,s=[];this.$rows.filter("[data-uxrtl-parent]").map(function(r){var i=t(this).data("uxrtl-parent");e.contents.push(t(this)),s.indexOf(i)<0&&(s.push(i),e.headers.push(e.$rows.filter('[data-uxrtl-id="'+i+'"]')))})},setHeaders:function(){var t=this;this.headers.map(function(e){e.addClass("uxr-treelist-header").data("uxrtl-leaves",t.$el.find('[data-uxrtl-parent="'+e.data("uxrtl-id")+'"]')),0===e.find("> .uxr-treelist-toggle").length&&e.addClass("uxr-treelist-toggle")})},setContents:function(){this.contents.map(function(t){t.addClass("uxr-treelist-content uxr-treelist-collapsed")})},bindUIActions:function(){var e=this;e.$el.on(i.click,".uxr-treelist-toggle",function(s){s.preventDefault();var r=t(this).is(".uxr-treelist-header")?t(this):t(this).parent();r.is(".uxr-treelist-expanded")?e.collapse(r):e.expand(r)}).on(i.collapsed,".uxr-treelist-content",function(){e.onCollapsed(this)})},expand:function(t){t.addClass("uxr-treelist-expanded"),t.data("uxrtl-leaves").removeClass("uxr-treelist-collapsed")},collapse:function(t){t.removeClass("uxr-treelist-expanded"),t.data("uxrtl-leaves").addClass("uxr-treelist-collapsed").trigger("collapsed")},onCollapsed:function(e){var s=t(e);s.is(".uxr-treelist-header")&&this.collapse(s)},removeClasses:function(){this.$el.removeClass("uxr-treelist-ready")},destroy:function(){return e.destroy(this.el)}}),e=t.fn.treelist=t.fn.uxrtreelist=t.uxrtreelist=function(e){var s=this.selector;return this.each(function(){t.data(this,a.data)||t.data(this,a.data,new n(this,e,s))})},e.destroy=function(e){var s=t(void 0!==e?e:".uxr-treelist-ready");s.each(function(){var e=t(this),s=e.data(a.data);s.removeClasses("uxr-treelist-ready"),e.headers.removeData("uxrtl-leaves"),e.removeData(a.data)})},e.version="0.1.0",e.settings=r});